% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/adjacency.R
\name{dmft_adjacency}
\alias{dmft_adjacency}
\title{Create spatial adjacency structure from a shapefile}
\usage{
dmft_adjacency(
  shapefile_path = NULL,
  sf_obj = NULL,
  region_name_col = NULL,
  config
)
}
\arguments{
\item{shapefile_path}{Path to a shapefile (\code{.shp}).}

\item{sf_obj}{Alternatively, an \code{sf} object already in memory.
Exactly one of \code{shapefile_path} or \code{sf_obj} must be provided.}

\item{region_name_col}{Column in the shapefile containing region names.
If \code{NULL}, the function tries to detect it automatically.}

\item{config}{A \link{dmft_config} object. Region ordering in the adjacency
matrix will match \code{config$regions}.}
}
\value{
A list with elements:
\describe{
\item{adj_matrix}{Binary adjacency matrix (n x n).}
\item{nb}{\code{spdep} neighbourhood object.}
\item{sf}{The \code{sf} object (reordered to match config).}
\item{graph_path}{Path to the INLA graph file (temp file).}
\item{node1, node2}{Edge list for Stan / BYM2 scaling.}
}
}
\description{
Builds the neighbourhood graph needed for BYM2 spatial random effects.
Uses Queen contiguity (shared boundary or vertex). Isolated regions
(islands) are connected to their nearest neighbour.
}
\examples{
\dontrun{
adj <- dmft_adjacency(shapefile_path = "provinces.shp", config = cfg)
}
}
